<!DOCTYPE html>
<html>
  <head>
    <title>Daviti Petriashvili</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <link rel="stylesheet" type="text/css" href="dancingdots.css" />
  </head>
  <body>
    <audio id="hover-sound" src="res/choice.mp3" preload="auto"></audio>
    <audio id="click-sound" src="res/select.mp3" preload="auto"></audio>
    <audio id="entry-sound" src="res/entry.mp3" preload="auto"></audio>
    <audio id="loop-sound" src="res/loop.mp3" preload="auto" loop></audio>
    <div id="container">
      <div id="canvas-container"></div>
      <div id="menu">
        <a href="#" class="menu-entry">Contacts</a>
      </div>
    </div>
    <script>
      let hoverSound = document.getElementById("hover-sound");
      let clickSound = document.getElementById("click-sound");
      let entrySound = document.getElementById("entry-sound");
      let loopSound = document.getElementById("loop-sound");

      window.onload = function () {
        entrySound.play();
      };

      entrySound.onended = function () {
        loopSound.play();
      };

      let menuEntries = document.getElementsByClassName("menu-entry");
      for (let i = 0; i < menuEntries.length; i++) {
        menuEntries[i].addEventListener("mouseover", function () {
          hoverSound.play();
        });
        menuEntries[i].addEventListener("click", function (e) {
          e.preventDefault();
          clickSound.play();
        });
      }

      let circles = [];
      let time = 0;
      let rotation = 0;

      function setup() {
        let canvas = createCanvas(windowWidth / 2.5, windowHeight, WEBGL);
        canvas.parent("canvas-container");
        frameRate(60);
        let speeds = [1, 1.5, 2];
        for (let i = 0; i < 6; i++) {
          circles.push(new Circle(i, speeds[i % 3]));
        }
      }

      function draw() {
        background(0, 2, 12);
        time += 0.01;
        rotation += 0.01;
        rotateY(rotation);
        circles.forEach((circle) => {
          circle.update();
          circle.display();
        });
      }

      class Circle {
        constructor(offset, speed) {
          this.offset = offset;
          this.speed = speed;
        }

        update() {
          let radius = 200;
          this.pos = createVector(
            radius * cos(time * this.speed + this.offset),
            radius * sin(time * this.speed + this.offset),
            0
          );
        }

        display() {
          stroke(0, 100, 255);
          strokeWeight(0.5);
          fill(255);
          push();
          translate(this.pos.x, this.pos.y, this.pos.z);
          sphere(12);
          pop();
        }
      }
    </script>
    <div id="overlay">
      <div id="overlay-content">
        <button id="close-button">X</button>
        <form id="mail-form"></form>
      </div>
    </div>
  </body>
</html>
